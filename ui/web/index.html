<head>
<script>

var instrumentBank = [
  {
    "index": 0,
    "name": "Piano",
    "panning": {
      "wav": {
        "file": "examples/piano.wav",
        "pitched": true,
        "gain": 8.0,
      }
    }
  },
  {
    "index": 1,
    "name": "Bright Piano",
    "combined": [
      {
        "triangle": {
          "attack": 0.01,
          "decay": 1.0,
          "sustain": 0.3,
          "release": 4.0,
        }
      },
      {
        "square": {
          "attack": 0.001,
          "decay": 0.5,
          "sustain": 0.5,
          "release": 4.0,
        }
      },
      {
        "transpose": {
          "semitones": 12,
          "gain": 0.6,
          "sawtooth": {
            "attack": 0.01,
            "decay": 0.2,
            "sustain": 0.4,
            "release": 4.0,
          }
        }
      },
      {
        "transpose": {
          "semitones": 24,
          "gain": 0.5,
          "sawtooth": {
            "attack": 0.01,
            "decay": 0.2,
            "sustain": 0.3,
            "release": 4.0,
          }
        }
      }
    ]
  }
];

var example = {
  "channels": [
    {
      "channel_nr": 0,
      "name": "Kick",
      "instrument": {
        "modules": [
          {
            "type": "input",
            "x": 20,
            "y": 200,
          },
          {
            "type": "output",
            "x": 700,
            "y": 200,
          },
          {
            "type": "sine",
            "x": 190,
            "y": 50,
          },
          {
            "type": "triangle",
            "x": 190,
            "y": 340,
          },
          {
            "type": "low pass filter",
            "x": 500,
            "y": 200,
          },
        ],
        "patches": [
          {
            "from_module": 0,
            "to_module": 2,
            "from_socket": "FREQ",
            "to_socket": "FREQ",
          },
          {
            "from_module": 0,
            "to_module": 3,
            "from_socket": "FREQ",
            "to_socket": "FREQ",
          },
          {
            "from_module": 2,
            "to_module": 4,
            "from_socket": "OUT",
            "to_socket": "IN",
          },
          {
            "from_module": 3,
            "to_module": 4,
            "from_socket": "OUT",
            "to_socket": "IN",
          },
          {
            "from_module": 4,
            "to_module": 1,
            "from_socket": "OUT",
            "to_socket": "IN",
          },
        ],
      },
      "sequence_tracks": [

      ],
    },
    {
      "channel_nr": 1,
      "name": "Snare",
      "instrument": null,
      "sequence_tracks": [

      ],
    },
    {
      "channel_nr": 2,
      "name": "Bass",
      "instrument": null,
      "sequence_tracks": [

      ],
    },
  ],
};

</script>

<style>
body {
  width: 100%;
  height: 100vh;
  margin: 0;
}
.icon {
  background-image: url("/bleep-icons.gif");
  background-repeat: no-repeat;
  height: 16px;
  width: 16px;
  display: block;
}
.icon-sin {
  background-position: 0 0;
}
.icon-square {
  background-position: -16 0;
}
.icon-triangle {
  background-position: 0 -16;
}
.icon-pulse {
  background-position: -16 -16;
}

</style>
</head>
<body>
  <div style="display:flex">
<i class="icon icon-sin"></i>
<i class="icon icon-square"></i>
<i class="icon icon-pulse"></i>
<i class="icon icon-triangle"></i>
</div>

<canvas id="main" height="600px" width="100%">
  Your browser does not support the canvas element. Please reconsider.
</canvas>
<script type="text/javascript" src="bleep.js"></script>
</body>
